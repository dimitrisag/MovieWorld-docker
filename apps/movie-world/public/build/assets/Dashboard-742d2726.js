import{a as S,b as D,c as F,d as k,_ as K}from"./AuthenticatedLayout-d9a70520.js";import{B as H,o as d,c as v,w as o,a as t,d as r,e as j,C as n,y as I,f as c,b as s,t as M,n as $,r as U,g as C,F as B,D as z}from"./app-3781b57f.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import P from"./Movie-223e0382.js";const W={data:()=>({form:{},title:"",description:""}),methods:{async submit(){const a={title:this.title,description:this.description,user_id:this.$page.props.auth.user.id};await H.post(route("addMovie"),a).then(e=>{this.$emit("closeModal")})}}};function A(a,e,l,h,V,i){const g=n("v-card-title"),y=n("v-text-field"),b=n("v-textarea"),f=n("v-btn"),m=n("v-form"),x=n("v-sheet"),p=n("v-card-text"),w=n("v-card");return d(),v(w,{width:"400",class:"mx-auto"},{default:o(()=>[t(g,null,{default:o(()=>[r("Insert new movie")]),_:1}),t(p,null,{default:o(()=>[t(x,{width:"300",class:"mx-auto"},{default:o(()=>[t(m,{onSubmit:j(i.submit,["prevent"])},{default:o(()=>[t(y,{modelValue:a.title,"onUpdate:modelValue":e[0]||(e[0]=_=>a.title=_),label:"Movie title"},null,8,["modelValue"]),t(b,{modelValue:a.description,"onUpdate:modelValue":e[1]||(e[1]=_=>a.description=_),label:"Movie description"},null,8,["modelValue"]),t(f,{type:"submit",block:"",class:"mt-2",color:"success"},{default:o(()=>[r("Submit")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}const E=L(W,[["render",A]]),T={class:"bg-white border-b border-gray-100"},q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"flex justify-between h-16"},J={class:"flex"},Q={class:"hidden space-x-8 sm:-my-px sm:ml-10 sm:flex"},R={class:"hidden sm:flex sm:items-center sm:ml-6"},X={class:"ml-3 relative"},Y={class:"inline-flex rounded-md"},Z={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 bg-white hover:text-gray-700 focus:outline-none transition ease-in-out duration-150"},ee=s("svg",{class:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),te={class:"-mr-2 flex items-center sm:hidden"},oe={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},se={class:"pt-2 pb-3 space-y-1"},ae={class:"pt-4 pb-1 border-t border-gray-200"},ne={class:"px-4"},le={class:"font-medium text-base text-gray-800"},re={class:"font-medium text-sm text-gray-500"},de={class:"mt-3 space-y-1"},ie={key:0,class:"bg-white shadow"},ue={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},ce={__name:"HeaderMenu",setup(a){const e=I(!1);return(l,h)=>(d(),c(B,null,[s("nav",T,[s("div",q,[s("div",G,[s("div",J,[s("div",Q,[t(S,{class:"text-h5",href:l.route("dashboard"),active:l.route().current("dashboard")},{default:o(()=>[r(" Movie World ")]),_:1},8,["href","active"])])]),s("div",R,[s("div",X,[t(F,{align:"right",width:"48"},{trigger:o(()=>[s("span",Y,[s("button",Z,[r(M(l.$page.props.auth.user.name)+" ",1),ee])])]),content:o(()=>[t(D,{href:l.route("profile.edit")},{default:o(()=>[r(" Profile ")]),_:1},8,["href"]),t(D,{href:l.route("logout"),method:"post",as:"button"},{default:o(()=>[r(" Log Out ")]),_:1},8,["href"])]),_:1})])]),s("div",te,[s("button",{onClick:h[0]||(h[0]=V=>e.value=!e.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(d(),c("svg",oe,[s("path",{class:$({hidden:e.value,"inline-flex":!e.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),s("path",{class:$({hidden:!e.value,"inline-flex":e.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),s("div",{class:$([{block:e.value,hidden:!e.value},"sm:hidden"])},[s("div",se,[t(k,{href:l.route("dashboard"),active:l.route().current("dashboard")},{default:o(()=>[r(" Dashboard ")]),_:1},8,["href","active"])]),s("div",ae,[s("div",ne,[s("div",le,M(l.$page.props.auth.user.name),1),s("div",re,M(l.$page.props.auth.user.email),1)]),s("div",de,[t(k,{href:l.route("profile.edit")},{default:o(()=>[r(" Profile ")]),_:1},8,["href"]),t(k,{href:l.route("logout"),method:"post",as:"button"},{default:o(()=>[r(" Log Out ")]),_:1},8,["href"])])])],2)]),l.$slots.header?(d(),c("header",ie,[s("div",ue,[U(l.$slots,"header")])])):C("",!0)],64))}},me={components:{AuthenticatedLayout:K,ModalForm:E,HeaderMenu:ce,Movie:P},data:()=>({dialog:!1,componentKey:0,movies:[],descOrder:!1,params:{}}),mounted(){this.getData()},watch:{params:{deep:!0,handler(){this.getData(this.params)}}},methods:{handleDialog(){this.dialog=!0},handleCloseModal(){this.dialog=!1,this.getData(this.params)},async getData(a){await H.get(route("movies"),{params:a}).then(e=>{this.movies=e.data,this.componentKey+=1})},sortBy(a){this.descOrder=!this.descOrder,a==="likes"?this.params.orderBy="likes_count":a==="hates"?this.params.orderBy="dislikes_count":this.params.orderBy=a,this.descOrder?this.params.order="asc":this.params.order="desc",this.componentKey+=1}}},pe={class:"py-12"},_e={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"};function he(a,e,l,h,V,i){const g=n("Head"),y=n("HeaderMenu"),b=n("Movie"),f=n("v-col"),m=n("v-btn"),x=n("v-card-title"),p=n("v-card-item"),w=n("v-card"),_=n("v-row"),N=n("ModalForm"),O=n("v-dialog");return d(),c(B,null,[t(g,{title:"MovieWorld"}),a.$page.props.auth.user?(d(),v(y,{key:0})):C("",!0),s("div",pe,[s("div",_e,[t(_,{class:"py-6"},{default:o(()=>[t(f,{cols:"12",sm:"8"},{default:o(()=>[(d(),c("ul",{key:a.componentKey},[(d(!0),c(B,null,z(a.movies,u=>(d(),c("li",{key:u.id},[(d(),v(b,{class:"my-2",movie:u,key:a.componentKey,onVoteUpdated:e[0]||(e[0]=fe=>i.getData(a.params))},null,8,["movie"]))]))),128))]))]),_:1}),t(f,{cols:"12",sm:"4"},{default:o(()=>[a.$page.props.auth.user?(d(),v(m,{key:0,"prepend-icon":"mdi-plus-box-multiple-outline",color:"success",onClick:i.handleDialog},{default:o(()=>[r("New Movie")]),_:1},8,["onClick"])):C("",!0),t(w,{class:"my-4"},{default:o(()=>[t(x,null,{default:o(()=>[r("Sort by")]),_:1}),t(p,null,{default:o(()=>[t(m,{variant:"outlined",prependIcon:"mdi-thumb-up-outline",rounded:"pill",color:"primary",onClick:e[1]||(e[1]=u=>i.sortBy("likes"))},{default:o(()=>[r(" Likes ")]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(m,{variant:"outlined",prependIcon:"mdi-thumb-down-outline",rounded:"pill",color:"primary",onClick:e[2]||(e[2]=u=>i.sortBy("hates"))},{default:o(()=>[r(" Hates ")]),_:1})]),_:1}),t(p,null,{default:o(()=>[t(m,{variant:"outlined",prependIcon:"mdi-clipboard-text-clock",rounded:"pill",color:"primary",onClick:e[3]||(e[3]=u=>i.sortBy("created_at"))},{default:o(()=>[r(" Dates ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),t(O,{modelValue:a.dialog,"onUpdate:modelValue":e[5]||(e[5]=u=>a.dialog=u)},{default:o(()=>[t(N,{onClose:e[4]||(e[4]=u=>a.dialog=!1),onCloseModal:i.handleCloseModal},null,8,["onCloseModal"])]),_:1},8,["modelValue"])])],64)}const xe=L(me,[["render",he]]);export{xe as default};
